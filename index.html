<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Калькулятор</title>
    <link href="css/css.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="js/jquery-3.2.0.min.js">

    </script>
</head>
<body><br><br><br><br>
<div class="container">
    <div class="calculator panel panel-default">
        <div class="calculator_head panel-heading">
            <h3 class="calculator_head__name panel-title">Калькулятор</h3>
        </div>
        <div class="calculator_body panel-body">
            <form action="calculator.php" class="form form-inline" method="get">

                <div class="input-group">
                    <input id="height" name="height" class="input1 form-control" type="text" min="500" max="1200"
                           value="500">
                    <label class="input-group-addon" for="height">мм</label>

                    <input id="width" name="width" class="input2 form-control" type="text" value="500">
                    <label class="input-group-addon" for="width">мм</label>
                </div>

                <label for="lamination">Ламинация</label>
                <select class="lamination form-control" name="lamination" id="lamination">
                    <option value="no">Нет</option>
                    <option value="outside">Снаружи</option>
                    <option value="inside">Изнутри</option>
                    <option value="both">С обеих сторон</option>
                </select>

                <div class="type_of_window row">
                    <a class="window1" href="#"><img class="col-lg-2" src="img/type_1.jpg"></a>
                    <a class="window2" href="#"><img class="col-lg-2" src="img/type_2.jpg"></a>
                    <a class="window3" href="#"><img class="col-lg-2" src="img/type_3.jpg"></a>
                    <a class="window4" href="#"><img class="col-lg-2" src="img/type_4.jpg"></a>
                    <a class="window5" href="#"><img class="col-lg-2" src="img/type_5.jpg"></a>
                    <a class="window6" href="#"><img class="col-lg-2" src="img/type_6.jpg"></a>
                </div>

                <input class="type" type="hidden" name="type" value="type_1.csv">
                <input type="hidden" value="user" name="id">

            </form>
        </div>
    </div>
    <div class="results"></div>
    <div class="res"></div>
</div>
</body>
<script>

    $(document).ready(function () {

        var i12 = $('.input1, .input2');
        var i1 = $(".input1");
        var i2 = $(".input2");
        var tow = $(".type_of_window");
        var type_of_window;

        $(".window1").click(function () {

            type_of_window = "type_1.csv";
            i12.val(500);
            $('.type').val("type_1.csv");

        });
        $(".window2").click(function () {

            type_of_window = "type_2.csv";
            i12.val(600);
            $('.type').val("type_2.csv");
        });
        $(".window3").click(function () {

            type_of_window = "type_3.csv";
            i1.val(600);
            i2.val(800);
            $('.type').val("type_3.csv");

        });
        $(".window4").click(function () {

            type_of_window = "type_4.csv";
            i1.val(600);
            i2.val(800);
            $('.type').val("type_4.csv");
        });
        $(".window5").click(function () {

            type_of_window = "type_5.csv";
            i1.val(1800);
            i2.val(700);
            $('.type').val("type_5.csv");
        });
        $(".window6").click(function () {

            type_of_window = "type_6.csv";
           // i1.val(1800);
            //i2.val(1000);
            $('.type').val("type_6.csv");
        });


        $(".input1, .input2, .lamination, .type_of_window").bind("change click", function () {

            i12.bind("change keyup input click", function () {
                if (this.value.match(/[^0-9]/g)) {
                    this.value = this.value.replace(/[^0-9]/g, '');
                }
            });
            // var type = $(".type_of_window").val();
            var type = type_of_window;

            var val = i1.val();
            switch (type) {
                case "type_1.csv":
                    if (!(val > 500 && val < 2300))

                        i1.val(500);
                    break;
                case "type_2.csv":
                case "type_3.csv":
                case "type_4.csv":
                    if (!(val > 1900 && val < 600))

                        i1.val(600);
                    break;
                case "type_5.csv":
                case "type_6.csv":
                    if (val > 2500 && val < 1800)
                        i1.val(1800);
                    break;
            }

            var val2 = i2.val();

            switch (type) {
                case "type_1.csv":
                    if (!(val2 > 1800 && val2 < 500))
                        i2.val(500);
                    break;
                case "type_2.csv":
                    if (!(val2 > 1600 && val2 < 600))
                        i2.val(600);
                    break;
                case "type_3.csv":
                    if (!(val2 > 3000 && val2 < 800))
                        i2.val(800);
                    break;
                case "type_4.csv":
                    if (!(val2 > 2600 && val2 < 800))

                        i2.val(800);
                    break;
                case "type_5.csv":
                    if (!(val2 > 1200 && val2 < 700))
                        i2.val(700);
                    break;
                case "type_6.csv":
                    if (!(val2 > 2500 && val2 < 1000))
                        i2.val(1000);
                    break;
            }

            var msg = $('.form').serialize();
            $.ajax({
                url: 'main.php',
                data: msg,
                success: function (data) {
                    $('.results').html(data);
                }
            });
        });
    });
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
</html>